{"version":3,"sources":["auth/index.js","core/Menu.js","config.js","core/Layout.js","user/Signup.js","user/Signin.js","core/Home.js","Routes.js","index.js"],"names":["isAuthenticated","window","localStorage","getItem","JSON","parse","isActive","history","path","location","pathname","color","withRouter","className","style","to","cursor","onClick","next","removeItem","fetch","process","method","then","response","console","log","catch","err","signout","push","Layout","title","description","children","Signup","useState","name","email","password","error","success","values","setValues","handleChange","event","target","value","clickSubmit","user","preventDefault","headers","Accept","body","stringify","json","data","display","onChange","type","Signin","loading","redirectToReferrer","setItem","authenticate","redirectUser","Home","Routes","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3314407e.chunk.js","sourcesContent":["import { API } from \"../config\";\n\nexport const signup = user => {\n  return fetch(`http://localhost:3001/createUser`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  })\n    .then(response => {\n      return response.json();\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n\nexport const signin = user => {\n  return fetch(`http://localhost:3001/session`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  })\n    .then(response => {\n      return response.json();\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n\nexport const authenticate = (data, next) => {\n  if (typeof window !== \"undefined\") {\n    localStorage.setItem(\"jwt\", JSON.stringify(data));\n    next();\n  }\n};\n\nexport const signout = next => {\n  if (typeof window !== \"undefined\") {\n    localStorage.removeItem(\"jwt\");\n    next();\n    return fetch(`${API}/signout`, {\n      method: \"GET\",\n    })\n    .then(response => {\n      console.log('signout', response)\n    })\n    .catch(err => console.log(err));\n  }\n};\n\n\nexport const isAuthenticated = () => {\n  if(typeof window == \"undefined\") {\n    return false;\n  }\n  if(localStorage.getItem('jwt')) {\n    return JSON.parse(localStorage.getItem('jwt'))\n  } else  {\n  return false;\n  }\n}","import React, { Fragment } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { signout, isAuthenticated } from \"../auth\";\n\nconst isActive = (history, path) => {\n  if (history.location.pathname === path) {\n    return { color: \"#ff9900\" };\n  } else {\n    return { color: \"#ffffff\" };\n  }\n};\n\nconst Menu = ({ history }) => (\n  <div>\n    <ul className=\"nav nav-tabs bg-primary\">\n      <li className=\"nav-item\">\n        <Link className=\"nav-link\" style={isActive(history, \"/\")} to=\"/\">\n          Home\n        </Link>\n      </li>\n\n      {!isAuthenticated() && (\n        <Fragment>\n          <li className=\"nav-item\">\n            <Link\n              className=\"nav-link\"\n              style={isActive(history, \"/signin\")}\n              to=\"/signin\"\n            >\n              Signin\n            </Link>\n          </li>\n\n          <li className=\"nav-item\">\n            <Link\n              className=\"nav-link\"\n              style={isActive(history, \"/signup\")}\n              to=\"/signup\"\n            >\n              Signup\n            </Link>\n          </li>\n        </Fragment>\n      )}\n      \n      {isAuthenticated() && (\n        <li className=\"nav-item\">\n          <span\n            className=\"nav-link\"\n            style={{ cursor: \"pointer\", color: \"#ffffff\" }}\n            onClick={() =>\n              signout(() => {\n                history.push(\"/\");\n              })\n            }\n          >\n            Signout\n          </span>\n        </li>\n      )}\n    </ul>\n  </div>\n);\n\nexport default withRouter(Menu);\n","export const API = process.env.REACT_APP_API_URL;","import React from \"react\";\nimport Menu from \"./Menu\";\n\nconst Layout = ({\n    title = \"Title\",\n    description = \"Description\",\n    className,\n    children\n}) => (\n    <div>\n        <Menu />\n        <div className=\"jumbotron\">\n            <h2>{title}</h2>\n            <p className=\"lead\">{description}</p>\n        </div>\n        <div className={className}>{children}</div>\n    </div>\n);\n\nexport default Layout;","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Layout from \"../core/Layout\";\nimport { signup } from \"../auth\";\n\nconst Signup = () => {\n    const [values, setValues] = useState({\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        error: \"\",\n        success: false\n    });\n\n    const { name, email, password, success, error } = values;\n\n    const handleChange = name => event => {\n        setValues({ ...values, error: false, [name]: event.target.value });\n    };\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setValues({ ...values, error: false });\n        signup({ name, email, password }).then(data => {\n            if (data.error) {\n                setValues({ ...values, error: data.error, success: false });\n            } else {\n                setValues({\n                    ...values,\n                    name: \"\",\n                    email: \"\",\n                    password: \"\",\n                    error: \"\",\n                    success: true\n                });\n            }\n        });\n    };\n\n    const signUpForm = () => (\n        <form>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Name</label>\n                <input\n                    onChange={handleChange(\"name\")}\n                    type=\"text\"\n                    className=\"form-control\"\n                    value={name}\n                />\n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Email</label>\n                <input\n                    onChange={handleChange(\"email\")}\n                    type=\"email\"\n                    className=\"form-control\"\n                    value={email}\n                />\n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Password</label>\n                <input\n                    onChange={handleChange(\"password\")}\n                    type=\"password\"\n                    className=\"form-control\"\n                    value={password}\n                />\n            </div>\n            <button onClick={clickSubmit} className=\"btn btn-primary\">\n                Submit\n            </button>\n        </form>\n    );\n\n    const showError = () => (\n        <div\n            className=\"alert alert-danger\"\n            style={{ display: error ? \"\" : \"none\" }}\n        >\n            {error}\n        </div>\n    );\n\n    const showSuccess = () => (\n        <div\n            className=\"alert alert-info\"\n            style={{ display: success ? \"\" : \"none\" }}\n        >\n            New account is created. Please <Link to=\"/signin\">Signin</Link>\n        </div>\n    );\n\n    return (\n        <Layout\n            title=\"Signup\"\n            description=\"Signup to Node React E-commerce App\"\n            className=\"container col-md-8 offset-md-2\"\n        >\n            {showSuccess()}\n            {showError()}\n            {signUpForm()}\n        </Layout>\n    );\n};\n\nexport default Signup;\n","import React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Layout from \"../core/Layout\";\nimport { signin, authenticate } from \"../auth\";\n\nconst Signin = () => {\n    const [values, setValues] = useState({\n        email: \"michaela@gmail.com\",\n        password: \"michaela123\",\n        error: \"\",\n        loading: false,\n        redirectToReferrer: false\n    });\n\n    const { email, password, loading, error, redirectToReferrer } = values;\n\n    const handleChange = name => event => {\n        setValues({ ...values, error: false, [name]: event.target.value });\n    };\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setValues({ ...values, error: false, loading: true });\n        signin({ email, password }).then(data => {\n            if (data.error) {\n                setValues({ ...values, error: data.error, loading: false });\n            } else {\n                authenticate(data, () => {\n                    setValues({\n                        ...values,\n                        redirectToReferrer: true\n                })\n              });\n            }\n        });\n    };\n\n    const signInForm = () => (\n        <form>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Email</label>\n                <input\n                    onChange={handleChange(\"email\")}\n                    type=\"email\"\n                    className=\"form-control\"\n                    value={email}\n                />\n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Password</label>\n                <input\n                    onChange={handleChange(\"password\")}\n                    type=\"password\"\n                    className=\"form-control\"\n                    value={password}\n                />\n            </div>\n            <button onClick={clickSubmit} className=\"btn btn-primary\">\n                Submit\n            </button>\n        </form>\n    );\n\n    const showError = () => (\n        <div\n            className=\"alert alert-danger\"\n            style={{ display: error ? \"\" : \"none\" }}\n        >\n            {error}\n        </div>\n    );\n\n    const showLoading = () => (\n        loading && (<div className=\"alert alert-info\">\n            <h2>Loading...</h2>\n        </div>)\n    );\n\n    const redirectUser = () => {\n        if(redirectToReferrer) {\n            return <Redirect to=\"/\" />\n        }\n    }\n\n    return (\n        <Layout\n            title=\"Signin\"\n            description=\"Signin to WatchList\"\n            className=\"container col-md-8 offset-md-2\"\n        >\n            {showLoading()}\n            {showError()}\n            {signInForm()}\n            {redirectUser()}\n        </Layout>\n    );\n};\n\nexport default Signin;\n","import React from \"react\";\nimport Layout from \"./Layout\";\n\nconst Home = () => (\n    <Layout title=\"WatchList\" description=\"Home Page\">\n        ...\n    </Layout>\n);\n\nexport default Home;\n","import React from \"react\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport Signup from \"./user/Signup\";\nimport Signin from \"./user/Signin\";\nimport Home from \"./core/Home\";\n\nconst Routes = () => {\n    return (\n        <BrowserRouter>\n            <Switch>\n                <Route path=\"/\" exact component={Home} />\n                <Route path=\"/signin\" exact component={Signin} />\n                <Route path=\"/signup\" exact component={Signup} />\n            </Switch>\n        </BrowserRouter>\n    );\n};\n\nexport default Routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from './Routes';\n\nReactDOM.render(\n  <Routes />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}